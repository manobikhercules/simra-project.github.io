!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1);const o=n(2);window.onload=function(){document.getElementById("deleteInfo").addEventListener("click",(function(e){console.log(e.target.parentNode.parentNode.remove())}));const e=function(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("region");o(e)}},function(e,t,n){"use strict";n.r(t)},function(e,t,n){let o=n(3);function r(e,t,n,o,r,a,s){const d=document.createElement("td");d.setAttribute("data-label",o[t].text),e.appendChild(d);const i=document.createElement("div");i.className="is-flex is-align-items-center";const l=document.createElement("span");let c;if(l.className="tag is-medium mr-1 is-flex-grow-1","incidents"===t&&void 0!==s){c=document.createElement("a"),c.href=s;let e=document.createTextNode(n[0].toLocaleString());c.appendChild(e)}else c=document.createTextNode(n[0].toLocaleString());if(a?d.setAttribute("sorttable_customkey",Number.MAX_SAFE_INTEGER):d.setAttribute("sorttable_customkey",n[0].toString()),l.appendChild(c),i.appendChild(l),r){const e=document.createElement("span"),r=document.createElement("span");r.className="unicode-icon",n[1]>0?(e.className="tag "+o[t].tag,r.textContent="⬆"):(e.className="tag",r.textContent="➡");const a=document.createElement("span");a.className="icon-text is-flex-wrap-nowrap";const s=document.createElement("span");s.className="icon mr-0";const d=document.createElement("span");d.appendChild(document.createTextNode(n[1].toLocaleString())),s.appendChild(r),a.appendChild(s),a.appendChild(d),e.appendChild(a),i.appendChild(e)}d.appendChild(i)}e.exports=async function(e){let t=document.getElementById("regionTable"),[n,a,s,d,i]=await Promise.all([fetch("./resources/tableMeta.json"),fetch("./resources/dashboard.json"),fetch("./resources/mapLinks.json"),fetch("./resources/regionNames.json"),fetch("./resources/incidentLinks.json")]),l=await n.json(),c=await a.json(),m=await s.json(),u=await d.json(),f=await i.json();!function(e){document.getElementById("totalRides").innerHTML=e.totalRides.toLocaleString(),document.getElementById("totalIncidents").innerHTML=e.totalIncidents.toLocaleString(),document.getElementById("totalKm").innerHTML=e.totalKm.toLocaleString(),document.getElementById("sourceDate").innerHTML=e.sourceDate,null!=e.diffDate?document.getElementById("diffDate").innerHTML=e.diffDate:document.getElementById("diffText").style.display="none"}(c),function(e,t,n,o,a,s,d){for(const i of t.regions){const l=i.name===s;let c;try{c=a[i.name].DE}catch(e){console.log(i.name+" not found in regionNames.json"),c=i.name}const m=e.insertRow(),u=document.createElement("td");u.setAttribute("data-label",c),u.className="has-text-centered has-text-weight-bold";const f=o[i.name],h=document.createTextNode(c);if(void 0===f)u.appendChild(h);else{const e=document.createElement("a");e.href=f,e.appendChild(h),u.appendChild(e)}m.appendChild(u);let p=!0;void 0===t.diffDate&&(p=!1);for(const[e,t]of Object.entries(i))["rides","incidents","scaryIncidents","km"].includes(e)&&r(m,e,t,n,p,l,d[i.name])}}(t,c,l,m,u,e,f),function(e,t){const n=e.createTHead().insertRow();for(const[e,o]of Object.entries(t)){const e=document.createElement("th"),t=document.createElement("abbr");t.title=o.abbr;const r=document.createTextNode(o.text);t.appendChild(r),e.appendChild(t),n.appendChild(e)}}(t,l),o.makeSortable(t);const h=t.firstElementChild.firstElementChild.children[1];h.click(),h.click()}},function(e,t){
/*@cc_on @*/
if(sorttable={init:function(){arguments.callee.done||(arguments.callee.done=!0,n&&clearInterval(n),document.createElement&&document.getElementsByTagName&&(sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,s(document.getElementsByTagName("table"),(function(e){-1!=e.className.search(/\bsortable\b/)&&sorttable.makeSortable(e)}))))},makeSortable:function(e){if(0==e.getElementsByTagName("thead").length&&(the=document.createElement("thead"),the.appendChild(e.rows[0]),e.insertBefore(the,e.firstChild)),null==e.tHead&&(e.tHead=e.getElementsByTagName("thead")[0]),1==e.tHead.rows.length){sortbottomrows=[];for(var t=0;t<e.rows.length;t++)-1!=e.rows[t].className.search(/\bsortbottom\b/)&&(sortbottomrows[sortbottomrows.length]=e.rows[t]);if(sortbottomrows){null==e.tFoot&&(tfo=document.createElement("tfoot"),e.appendChild(tfo));for(t=0;t<sortbottomrows.length;t++)tfo.appendChild(sortbottomrows[t]);delete sortbottomrows}headrow=e.tHead.rows[0].cells;for(t=0;t<headrow.length;t++)headrow[t].className.match(/\bsorttable_nosort\b/)||(mtch=headrow[t].className.match(/\bsorttable_([a-z0-9]+)\b/),mtch&&(override=mtch[1]),mtch&&"function"==typeof sorttable["sort_"+override]?headrow[t].sorttable_sortfunction=sorttable["sort_"+override]:headrow[t].sorttable_sortfunction=sorttable.guessType(e,t),headrow[t].sorttable_columnindex=t,headrow[t].sorttable_tbody=e.tBodies[0],o(headrow[t],"click",sorttable.innerSortFunction=function(e){if(-1!=this.className.search(/\bsorttable_sorted\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse"),this.removeChild(document.getElementById("sorttable_sortfwdind")),sortrevind=document.createElement("span"),sortrevind.id="sorttable_sortrevind",sortrevind.innerHTML="&nbsp;&#x25BE;",void this.appendChild(sortrevind);if(-1!=this.className.search(/\bsorttable_sorted_reverse\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted"),this.removeChild(document.getElementById("sorttable_sortrevind")),sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML="&nbsp;&#x25B4;",void this.appendChild(sortfwdind);theadrow=this.parentNode,s(theadrow.childNodes,(function(e){1==e.nodeType&&(e.className=e.className.replace("sorttable_sorted_reverse",""),e.className=e.className.replace("sorttable_sorted",""))})),sortfwdind=document.getElementById("sorttable_sortfwdind"),sortfwdind&&sortfwdind.parentNode.removeChild(sortfwdind),sortrevind=document.getElementById("sorttable_sortrevind"),sortrevind&&sortrevind.parentNode.removeChild(sortrevind),this.className+=" sorttable_sorted",sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML="&nbsp;&#x25B4;",this.appendChild(sortfwdind),row_array=[],col=this.sorttable_columnindex,rows=this.sorttable_tbody.rows;for(var t=0;t<rows.length;t++)row_array[row_array.length]=[sorttable.getInnerText(rows[t].cells[col]),rows[t]];row_array.sort(this.sorttable_sortfunction),tb=this.sorttable_tbody;for(t=0;t<row_array.length;t++)tb.appendChild(row_array[t][1]);delete row_array}))}},guessType:function(e,t){sortfn=sorttable.sort_alpha;for(var n=0;n<e.tBodies[0].rows.length;n++)if(text=sorttable.getInnerText(e.tBodies[0].rows[n].cells[t]),""!=text){if(text.match(/^-?[�$�]?[\d,.]+%?$/))return sorttable.sort_numeric;if(possdate=text.match(sorttable.DATE_RE),possdate){if(first=parseInt(possdate[1]),second=parseInt(possdate[2]),first>12)return sorttable.sort_ddmm;if(second>12)return sorttable.sort_mmdd;sortfn=sorttable.sort_ddmm}}return sortfn},getInnerText:function(e){if(!e)return"";if(hasInputs="function"==typeof e.getElementsByTagName&&e.getElementsByTagName("input").length,null!=e.getAttribute("sorttable_customkey"))return e.getAttribute("sorttable_customkey");if(void 0!==e.textContent&&!hasInputs)return e.textContent.replace(/^\s+|\s+$/g,"");if(void 0!==e.innerText&&!hasInputs)return e.innerText.replace(/^\s+|\s+$/g,"");if(void 0!==e.text&&!hasInputs)return e.text.replace(/^\s+|\s+$/g,"");switch(e.nodeType){case 3:if("input"==e.nodeName.toLowerCase())return e.value.replace(/^\s+|\s+$/g,"");case 4:return e.nodeValue.replace(/^\s+|\s+$/g,"");case 1:case 11:for(var t="",n=0;n<e.childNodes.length;n++)t+=sorttable.getInnerText(e.childNodes[n]);return t.replace(/^\s+|\s+$/g,"");default:return""}},reverse:function(e){newrows=[];for(var t=0;t<e.rows.length;t++)newrows[newrows.length]=e.rows[t];for(t=newrows.length-1;t>=0;t--)e.appendChild(newrows[t]);delete newrows},sort_numeric:function(e,t){return aa=parseFloat(e[0].replace(/[^0-9.-]/g,"")),isNaN(aa)&&(aa=0),bb=parseFloat(t[0].replace(/[^0-9.-]/g,"")),isNaN(bb)&&(bb=0),aa-bb},sort_alpha:function(e,t){return e[0]==t[0]?0:e[0]<t[0]?-1:1},sort_ddmm:function(e,t){return mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},sort_mmdd:function(e,t){return mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},shaker_sort:function(e,t){for(var n=0,o=e.length-1,r=!0;r;){r=!1;for(var a=n;a<o;++a)if(t(e[a],e[a+1])>0){var s=e[a];e[a]=e[a+1],e[a+1]=s,r=!0}if(o--,!r)break;for(a=o;a>n;--a)if(t(e[a],e[a-1])<0){s=e[a];e[a]=e[a-1],e[a-1]=s,r=!0}n++}}},document.addEventListener&&document.addEventListener("DOMContentLoaded",sorttable.init,!1),/WebKit/i.test(navigator.userAgent))var n=setInterval((function(){/loaded|complete/.test(document.readyState)&&sorttable.init()}),10);function o(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=o.guid++),e.events||(e.events={});var a=e.events[t];a||(a=e.events[t]={},e["on"+t]&&(a[0]=e["on"+t])),a[n.$$guid]=n,e["on"+t]=r}}function r(e){var t=!0;e=e||a(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var o in n)this.$$handleEvent=n[o],!1===this.$$handleEvent(e)&&(t=!1);return t}function a(e){return e.preventDefault=a.preventDefault,e.stopPropagation=a.stopPropagation,e}window.onload=sorttable.init,o.guid=1,a.preventDefault=function(){this.returnValue=!1},a.stopPropagation=function(){this.cancelBubble=!0},Array.forEach||(Array.forEach=function(e,t,n){for(var o=0;o<e.length;o++)t.call(n,e[o],o,e)}),Function.prototype.forEach=function(e,t,n){for(var o in e)void 0===this.prototype[o]&&t.call(n,e[o],o,e)},String.forEach=function(e,t,n){Array.forEach(e.split(""),(function(o,r){t.call(n,o,r,e)}))};var s=function(e,t,n){if(e){var o=Object;if(e instanceof Function)o=Function;else{if(e.forEach instanceof Function)return void e.forEach(t,n);"string"==typeof e?o=String:"number"==typeof e.length&&(o=Array)}o.forEach(e,t,n)}};e.exports=sorttable}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9teXN0eWxlcy5zY3NzIiwid2VicGFjazovLy8uL3NyYy90YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc29ydHRhYmxlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZmlsbFRhYmxlIiwid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNvbnNvbGUiLCJsb2ciLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwidG9wUmVnaW9uIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwic29ydHRhYmxlIiwiZ2VuZXJhdGVTdGF0Q29sdW1uIiwicm93IiwidGFibGVNZXRhIiwiZGlmZnMiLCJhdFRvcCIsImluY2lkZW50TGluayIsImNlbGwiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidGV4dCIsImFwcGVuZENoaWxkIiwiZGl2IiwiY2xhc3NOYW1lIiwidG90YWxTcGFuIiwidG90YWxTcGFuQ2hpbGQiLCJ1bmRlZmluZWQiLCJjcmVhdGVUZXh0Tm9kZSIsInRvTG9jYWxlU3RyaW5nIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsInRvU3RyaW5nIiwiZGl2U3BhbiIsImljb24iLCJ0YWciLCJ0ZXh0Q29udGVudCIsImljb25UZXh0IiwiaWNvblNwYW4iLCJkaWZmVmFsdWUiLCJhc3luYyIsInRhYmxlIiwicjEiLCJyMiIsInIzIiwicjQiLCJyNSIsIlByb21pc2UiLCJhbGwiLCJmZXRjaCIsImpzb24iLCJkYXNoYm9hcmQiLCJtYXBMaW5rcyIsInJlZ2lvbk5hbWVzIiwiaW5jaWRlbnRMaW5rcyIsImlubmVySFRNTCIsInRvdGFsUmlkZXMiLCJ0b3RhbEluY2lkZW50cyIsInRvdGFsS20iLCJzb3VyY2VEYXRlIiwiZGlmZkRhdGUiLCJzdHlsZSIsImRpc3BsYXkiLCJ1cGRhdGVUb3RhbHMiLCJyZWdpb24iLCJyZWdpb25zIiwic2hvd25OYW1lIiwiZXJyIiwiaW5zZXJ0Um93IiwidGgiLCJsaW5rIiwidGV4dE5hbWUiLCJhIiwiZW50cmllcyIsImluY2x1ZGVzIiwiZ2VuZXJhdGVUYWJsZSIsImNyZWF0ZVRIZWFkIiwiYWJiciIsInRpdGxlIiwiZ2VuZXJhdGVUYWJsZUhlYWQiLCJtYWtlU29ydGFibGUiLCJzb3J0QnV0dG9uIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjaGlsZHJlbiIsImNsaWNrIiwiaW5pdCIsImFyZ3VtZW50cyIsImNhbGxlZSIsImRvbmUiLCJfdGltZXIiLCJjbGVhckludGVydmFsIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJEQVRFX1JFIiwiZm9yRWFjaCIsInNlYXJjaCIsImxlbmd0aCIsInRoZSIsInJvd3MiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwidEhlYWQiLCJzb3J0Ym90dG9tcm93cyIsInRGb290IiwidGZvIiwiaGVhZHJvdyIsImNlbGxzIiwibWF0Y2giLCJtdGNoIiwib3ZlcnJpZGUiLCJzb3J0dGFibGVfc29ydGZ1bmN0aW9uIiwiZ3Vlc3NUeXBlIiwic29ydHRhYmxlX2NvbHVtbmluZGV4Iiwic29ydHRhYmxlX3Rib2R5IiwidEJvZGllcyIsImRlYW5fYWRkRXZlbnQiLCJpbm5lclNvcnRGdW5jdGlvbiIsImUiLCJ0aGlzIiwicmV2ZXJzZSIsInJlbW92ZUNoaWxkIiwic29ydHJldmluZCIsImlkIiwic29ydGZ3ZGluZCIsInRoZWFkcm93IiwiY2hpbGROb2RlcyIsIm5vZGVUeXBlIiwicm93X2FycmF5IiwiY29sIiwiaiIsImdldElubmVyVGV4dCIsInNvcnQiLCJ0YiIsImNvbHVtbiIsInNvcnRmbiIsInNvcnRfYWxwaGEiLCJzb3J0X251bWVyaWMiLCJwb3NzZGF0ZSIsImZpcnN0IiwicGFyc2VJbnQiLCJzZWNvbmQiLCJzb3J0X2RkbW0iLCJzb3J0X21tZGQiLCJub2RlIiwiaGFzSW5wdXRzIiwiZ2V0QXR0cmlidXRlIiwiaW5uZXJUZXh0Iiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsIm5vZGVWYWx1ZSIsInRib2R5IiwibmV3cm93cyIsImIiLCJhYSIsInBhcnNlRmxvYXQiLCJpc05hTiIsImJiIiwieSIsImR0MSIsImR0MiIsInNoYWtlcl9zb3J0IiwibGlzdCIsImNvbXBfZnVuYyIsInN3YXAiLCJxIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInNldEludGVydmFsIiwicmVhZHlTdGF0ZSIsImVsZW1lbnQiLCJ0eXBlIiwiaGFuZGxlciIsIiQkZ3VpZCIsImd1aWQiLCJldmVudHMiLCJoYW5kbGVycyIsImhhbmRsZUV2ZW50IiwicmV0dXJuVmFsdWUiLCJmaXhFdmVudCIsIm93bmVyRG9jdW1lbnQiLCJwYXJlbnRXaW5kb3ciLCIkJGhhbmRsZUV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJBcnJheSIsImFycmF5IiwiYmxvY2siLCJjb250ZXh0IiwiRnVuY3Rpb24iLCJTdHJpbmciLCJzdHJp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cyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsInJlcXVpcmUoJy4vbXlzdHlsZXMuc2NzcycpO1xyXG5jb25zdCBmaWxsVGFibGUgPSByZXF1aXJlKFwiLi90YWJsZS5qc1wiKVxyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVJbmZvXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpKVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdXNlcnMgY2FuIHN1cHBseSBhIHJlZ2lvbiBuYW1lIHRoYXQgd2lsbCBiZSBsaXN0ZWQgYXQgdGhlIHRvcFxyXG4gICAgY29uc3QgdG9wUmVnaW9uID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdyZWdpb24nKVxyXG4gICAgXHJcbiAgICBmaWxsVGFibGUodG9wUmVnaW9uKVxyXG59XHJcblxyXG4vKipcclxuICogU291cmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85MDExMTUvaG93LWNhbi1pLWdldC1xdWVyeS1zdHJpbmctdmFsdWVzLWluLWphdmFzY3JpcHQ/cnE9MVxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZikge1xyXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xyXG4gICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnWz8mXScgKyBuYW1lICsgJyg9KFteJiNdKil8JnwjfCQpJyksXHJcbiAgICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICAgIGlmICghcmVzdWx0cykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XHJcbn0iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCJsZXQgc29ydHRhYmxlID0gcmVxdWlyZShcIi4vc29ydHRhYmxlLmpzXCIpXHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRhYmxlSGVhZCh0YWJsZSwgdGFibGVNZXRhKSB7XHJcbiAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCk7XHJcbiAgICBjb25zdCByb3cgPSB0aGVhZC5pbnNlcnRSb3coKTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlTWV0YSkpIHtcclxuICAgICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgICAgICBjb25zdCBhYmJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFiYnJcIilcclxuICAgICAgICBhYmJyLnRpdGxlID0gdmFsdWUuYWJiclxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZS50ZXh0KTtcclxuICAgICAgICBhYmJyLmFwcGVuZENoaWxkKHRleHQpXHJcbiAgICAgICAgdGguYXBwZW5kQ2hpbGQoYWJicik7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRoKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVUYWJsZSh0YWJsZSwgZGFzaGJvYXJkLCB0YWJsZU1ldGEsIG1hcExpbmtzLCByZWdpb25OYW1lcywgdG9wUmVnaW9uLCBpbmNpZGVudExpbmtzKSB7XHJcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiBkYXNoYm9hcmQucmVnaW9ucykge1xyXG4gICAgICAgIC8vIHRydWUgaWYgdGhlIGN1cnJlbnQgcmVnaW9uIHNob3VsZCBiZSBhdCB0aGUgdG9wIHdoZW4gbG9hZGluZyB0aGUgcGFnZVxyXG4gICAgICAgIGNvbnN0IGF0VG9wID0gcmVnaW9uLm5hbWUgPT09IHRvcFJlZ2lvblxyXG5cclxuICAgICAgICBsZXQgc2hvd25OYW1lXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc2hvd25OYW1lID0gcmVnaW9uTmFtZXNbcmVnaW9uLm5hbWVdW1wiREVcIl1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVnaW9uLm5hbWUgKyBcIiBub3QgZm91bmQgaW4gcmVnaW9uTmFtZXMuanNvblwiKVxyXG4gICAgICAgICAgICBzaG93bk5hbWUgPSByZWdpb24ubmFtZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGFibGUuaW5zZXJ0Um93KCk7XHJcbiAgICAgICAgLy8gbmFtZSBjb2x1bW5cclxuICAgICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKVxyXG4gICAgICAgIHRoLnNldEF0dHJpYnV0ZShcImRhdGEtbGFiZWxcIiwgc2hvd25OYW1lKVxyXG4gICAgICAgIHRoLmNsYXNzTmFtZSA9IFwiaGFzLXRleHQtY2VudGVyZWQgaGFzLXRleHQtd2VpZ2h0LWJvbGRcIlxyXG5cclxuICAgICAgICBjb25zdCBsaW5rID0gbWFwTGlua3NbcmVnaW9uLm5hbWVdXHJcbiAgICAgICAgY29uc3QgdGV4dE5hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzaG93bk5hbWUpO1xyXG4gICAgICAgIGlmIChsaW5rID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGguYXBwZW5kQ2hpbGQodGV4dE5hbWUpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpXHJcbiAgICAgICAgICAgIGEuaHJlZiA9IGxpbmtcclxuICAgICAgICAgICAgYS5hcHBlbmRDaGlsZCh0ZXh0TmFtZSlcclxuICAgICAgICAgICAgdGguYXBwZW5kQ2hpbGQoYSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRoKVxyXG4gICAgICAgIGxldCBkaWZmcyA9IHRydWVcclxuICAgICAgICBpZiAoZGFzaGJvYXJkLmRpZmZEYXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGlmZnMgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc3RhdCBjb2x1bW5zXHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVnaW9uKSkge1xyXG4gICAgICAgICAgICBpZiAoW1wicmlkZXNcIiwgXCJpbmNpZGVudHNcIiwgXCJzY2FyeUluY2lkZW50c1wiLCBcImttXCJdLmluY2x1ZGVzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGdlbmVyYXRlU3RhdENvbHVtbihyb3csIGtleSwgdmFsdWUsIHRhYmxlTWV0YSwgZGlmZnMsIGF0VG9wLCBpbmNpZGVudExpbmtzW3JlZ2lvbi5uYW1lXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGtleSA9IHJpZGVzLCB2YWx1ZSA9IFsxMDAsIDFdLCBkaWZmcyA9IHRydWUvZmFsc2UsIGF0VG9wID0gdHJ1ZS9mYWxzZVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVN0YXRDb2x1bW4ocm93LCBrZXksIHZhbHVlLCB0YWJsZU1ldGEsIGRpZmZzLCBhdFRvcCwgaW5jaWRlbnRMaW5rKSB7XHJcbiAgICAvLyBjcmVhdGUgY2VsbCBhbmQgYXBwZW5kIGFscmVhZHkgdG8gcm93XHJcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpXHJcbiAgICBjZWxsLnNldEF0dHJpYnV0ZShcImRhdGEtbGFiZWxcIiwgdGFibGVNZXRhW2tleV0udGV4dCk7XHJcbiAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbClcclxuXHJcbiAgICAvLyBjcmVhdGUgZGl2XHJcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICBkaXYuY2xhc3NOYW1lID0gXCJpcy1mbGV4IGlzLWFsaWduLWl0ZW1zLWNlbnRlclwiO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0b3RhbCBzcGFuXHJcbiAgICBjb25zdCB0b3RhbFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxyXG4gICAgdG90YWxTcGFuLmNsYXNzTmFtZSA9IFwidGFnIGlzLW1lZGl1bSBtci0xIGlzLWZsZXgtZ3Jvdy0xXCJcclxuICAgIC8vIGNyZWF0ZSB0b3RhbCBzcGFuIHRleHQuXHJcbiAgICBsZXQgdG90YWxTcGFuQ2hpbGQ7XHJcbiAgICAvLyBjcmVhdGUgYSBocmVmIHJlZmVyZW5jaW5nIHRvIHRoZSBpbmNpZGVudCBtYXAsIGlmIFwiaW5jaWRlbnRzXCItY2VsbCBpcyBiZWluZyBjcmVhdGVkXHJcbiAgICBpZiAoKGtleSA9PT0gJ2luY2lkZW50cycpICYmIChpbmNpZGVudExpbmsgIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICB0b3RhbFNwYW5DaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpXHJcbiAgICAgICAgdG90YWxTcGFuQ2hpbGQuaHJlZiA9IGluY2lkZW50TGlua1xyXG4gICAgICAgIGxldCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWVbMF0udG9Mb2NhbGVTdHJpbmcoKSlcclxuICAgICAgICB0b3RhbFNwYW5DaGlsZC5hcHBlbmRDaGlsZCh0ZXh0KVxyXG4gICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCBqdXN0IHByaW50IHRoZSB0ZXh0XHJcbiAgICAgICAgdG90YWxTcGFuQ2hpbGQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZVswXS50b0xvY2FsZVN0cmluZygpKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghYXRUb3ApIHtcclxuICAgICAgICAvLyBzZXQgc29ydC1rZXkgb2YgY2VsbCB0byB2YWx1ZSAobm9ybWFsIHNvcnRpbmcpXHJcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJzb3J0dGFibGVfY3VzdG9ta2V5XCIsIHZhbHVlWzBdLnRvU3RyaW5nKCkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHRoZSBnaXZlbiBjZWxsIHNob3VsZCBiZSBhdCB0aGUgdG9wLCBzbyBhZGQgYSB2ZXJ5IGxhcmdlIHRvcC1rZXlcclxuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcInNvcnR0YWJsZV9jdXN0b21rZXlcIiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gYXBwZW5kIGVsZW1lbnRzXHJcbiAgICB0b3RhbFNwYW4uYXBwZW5kQ2hpbGQodG90YWxTcGFuQ2hpbGQpXHJcbiAgICBkaXYuYXBwZW5kQ2hpbGQodG90YWxTcGFuKVxyXG5cclxuICAgIGlmIChkaWZmcykge1xyXG4gICAgICAgIC8vIGNyZWF0ZSBkaWZmIHNwYW5cclxuICAgICAgICBjb25zdCBkaXZTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICBpY29uLmNsYXNzTmFtZSA9IFwidW5pY29kZS1pY29uXCJcclxuICAgICAgICBpZiAodmFsdWVbMV0gPiAwKSB7XHJcbiAgICAgICAgICAgIGRpdlNwYW4uY2xhc3NOYW1lID0gXCJ0YWcgXCIgKyB0YWJsZU1ldGFba2V5XS50YWdcclxuICAgICAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IFwi4qyGXCJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXZTcGFuLmNsYXNzTmFtZSA9IFwidGFnXCJcclxuICAgICAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IFwi4p6hXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaWNvblRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKVxyXG4gICAgICAgIGljb25UZXh0LmNsYXNzTmFtZSA9IFwiaWNvbi10ZXh0IGlzLWZsZXgtd3JhcC1ub3dyYXBcIlxyXG4gICAgICAgIGNvbnN0IGljb25TcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICBpY29uU3Bhbi5jbGFzc05hbWUgPSBcImljb24gbXItMFwiXHJcbiAgICAgICAgY29uc3QgZGlmZlZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIilcclxuICAgICAgICBkaWZmVmFsdWUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWVbMV0udG9Mb2NhbGVTdHJpbmcoKSkpXHJcblxyXG4gICAgICAgIC8vIGFwcGVuZCBlbGVtZW50cyBpbiByZXZlcnNlIGNyZWF0aW9uIG9yZGVyIHRvIGNlbGxcclxuICAgICAgICBpY29uU3Bhbi5hcHBlbmRDaGlsZChpY29uKVxyXG4gICAgICAgIGljb25UZXh0LmFwcGVuZENoaWxkKGljb25TcGFuKVxyXG4gICAgICAgIGljb25UZXh0LmFwcGVuZENoaWxkKGRpZmZWYWx1ZSlcclxuICAgICAgICBkaXZTcGFuLmFwcGVuZENoaWxkKGljb25UZXh0KVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChkaXZTcGFuKVxyXG4gICAgfVxyXG5cclxuICAgIGNlbGwuYXBwZW5kQ2hpbGQoZGl2KVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUb3RhbHMoZGFzaGJvYXJkKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdGFsUmlkZXNcIikuaW5uZXJIVE1MID0gZGFzaGJvYXJkLnRvdGFsUmlkZXMudG9Mb2NhbGVTdHJpbmcoKVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbEluY2lkZW50c1wiKS5pbm5lckhUTUwgPSBkYXNoYm9hcmQudG90YWxJbmNpZGVudHMudG9Mb2NhbGVTdHJpbmcoKVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3RhbEttXCIpLmlubmVySFRNTCA9IGRhc2hib2FyZC50b3RhbEttLnRvTG9jYWxlU3RyaW5nKClcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic291cmNlRGF0ZVwiKS5pbm5lckhUTUwgPSBkYXNoYm9hcmQuc291cmNlRGF0ZVxyXG5cclxuICAgIGlmIChkYXNoYm9hcmQuZGlmZkRhdGUgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaWZmRGF0ZVwiKS5pbm5lckhUTUwgPSBkYXNoYm9hcmQuZGlmZkRhdGVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaWZmVGV4dFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIHRvcFJlZ2lvbiBjYW4gYmUgc2V0IHRvIHRoZSBuYW1lIG9mIGEgcmVnaW9uIGFzIGZvdW5kIGluIHRoZSBkYXNoYm9hcmQuanNvbjsgdGhpcyByZWdpb24gd2lsbCB0aGVuIGJlIHNob3duIGF0IHRoZSB0b3Agb2YgdGhlIHRhYmxlXHJcbmFzeW5jIGZ1bmN0aW9uIGZpbGxUYWJsZSh0b3BSZWdpb24pIHtcclxuICAgIGxldCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVnaW9uVGFibGVcIik7XHJcbiAgICBsZXQgW3IxLCByMiwgcjMsIHI0LCByNV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgZmV0Y2goXCIuL3Jlc291cmNlcy90YWJsZU1ldGEuanNvblwiKSxcclxuICAgICAgICBmZXRjaChcIi4vcmVzb3VyY2VzL2Rhc2hib2FyZC5qc29uXCIpLFxyXG4gICAgICAgIGZldGNoKFwiLi9yZXNvdXJjZXMvbWFwTGlua3MuanNvblwiKSxcclxuICAgICAgICBmZXRjaChcIi4vcmVzb3VyY2VzL3JlZ2lvbk5hbWVzLmpzb25cIiksXHJcbiAgICAgICAgZmV0Y2goXCIuL3Jlc291cmNlcy9pbmNpZGVudExpbmtzLmpzb25cIilcclxuICAgIF0pXHJcblxyXG4gICAgbGV0IHRhYmxlTWV0YSA9IGF3YWl0IHIxLmpzb24oKVxyXG4gICAgbGV0IGRhc2hib2FyZCA9IGF3YWl0IHIyLmpzb24oKVxyXG4gICAgbGV0IG1hcExpbmtzID0gYXdhaXQgcjMuanNvbigpXHJcbiAgICBsZXQgcmVnaW9uTmFtZXMgPSBhd2FpdCByNC5qc29uKClcclxuICAgIGxldCBpbmNpZGVudExpbmtzID0gYXdhaXQgcjUuanNvbigpXHJcblxyXG4gICAgdXBkYXRlVG90YWxzKGRhc2hib2FyZCk7XHJcbiAgICBnZW5lcmF0ZVRhYmxlKHRhYmxlLCBkYXNoYm9hcmQsIHRhYmxlTWV0YSwgbWFwTGlua3MsIHJlZ2lvbk5hbWVzLCB0b3BSZWdpb24sIGluY2lkZW50TGlua3MpO1xyXG4gICAgZ2VuZXJhdGVUYWJsZUhlYWQodGFibGUsIHRhYmxlTWV0YSk7XHJcblxyXG4gICAgc29ydHRhYmxlLm1ha2VTb3J0YWJsZSh0YWJsZSlcclxuICAgIC8vIHRyaWdnZXIgdGhlIHNvcnRpbmcgYnkgY2xpY2tpbmcgdGhlIGJ1dHRvbiBvZiB0aGUgI0ZhaHJ0ZW4gY29sdW1uXHJcbiAgICBjb25zdCBzb3J0QnV0dG9uID0gdGFibGUuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuY2hpbGRyZW5bMV1cclxuICAgIHNvcnRCdXR0b24uY2xpY2soKVxyXG4gICAgc29ydEJ1dHRvbi5jbGljaygpXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZmlsbFRhYmxlOyIsIi8qXHJcbiAgU29ydFRhYmxlXHJcbiAgdmVyc2lvbiAyXHJcbiAgN3RoIEFwcmlsIDIwMDdcclxuICBTdHVhcnQgTGFuZ3JpZGdlLCBodHRwOi8vd3d3LmtyeW9nZW5peC5vcmcvY29kZS9icm93c2VyL3NvcnR0YWJsZS9cclxuXHJcbiAgSW5zdHJ1Y3Rpb25zOlxyXG4gIERvd25sb2FkIHRoaXMgZmlsZVxyXG4gIEFkZCA8c2NyaXB0IHNyYz1cInNvcnR0YWJsZS5qc1wiPjwvc2NyaXB0PiB0byB5b3VyIEhUTUxcclxuICBBZGQgY2xhc3M9XCJzb3J0YWJsZVwiIHRvIGFueSB0YWJsZSB5b3UnZCBsaWtlIHRvIG1ha2Ugc29ydGFibGVcclxuICBDbGljayBvbiB0aGUgaGVhZGVycyB0byBzb3J0XHJcblxyXG4gIFRoYW5rcyB0byBtYW55LCBtYW55IHBlb3BsZSBmb3IgY29udHJpYnV0aW9ucyBhbmQgc3VnZ2VzdGlvbnMuXHJcbiAgTGljZW5jZWQgYXMgWDExOiBodHRwOi8vd3d3LmtyeW9nZW5peC5vcmcvY29kZS9icm93c2VyL2xpY2VuY2UuaHRtbFxyXG4gIFRoaXMgYmFzaWNhbGx5IG1lYW5zOiBkbyB3aGF0IHlvdSB3YW50IHdpdGggaXQuXHJcbiovXHJcblxyXG5cclxudmFyIHN0SXNJRSA9IC8qQGNjX29uIUAqLyBmYWxzZTtcclxuXHJcbnNvcnR0YWJsZSA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHF1aXQgaWYgdGhpcyBmdW5jdGlvbiBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZFxyXG4gICAgICAgIGlmIChhcmd1bWVudHMuY2FsbGVlLmRvbmUpIHJldHVybjtcclxuICAgICAgICAvLyBmbGFnIHRoaXMgZnVuY3Rpb24gc28gd2UgZG9uJ3QgZG8gdGhlIHNhbWUgdGhpbmcgdHdpY2VcclxuICAgICAgICBhcmd1bWVudHMuY2FsbGVlLmRvbmUgPSB0cnVlO1xyXG4gICAgICAgIC8vIGtpbGwgdGhlIHRpbWVyXHJcbiAgICAgICAgaWYgKF90aW1lcikgY2xlYXJJbnRlcnZhbChfdGltZXIpO1xyXG5cclxuICAgICAgICBpZiAoIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSByZXR1cm47XHJcblxyXG4gICAgICAgIHNvcnR0YWJsZS5EQVRFX1JFID0gL14oXFxkXFxkPylbXFwvXFwuLV0oXFxkXFxkPylbXFwvXFwuLV0oKFxcZFxcZCk/XFxkXFxkKSQvO1xyXG5cclxuICAgICAgICBmb3JFYWNoKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpLCBmdW5jdGlvbih0YWJsZSkge1xyXG4gICAgICAgICAgICBpZiAodGFibGUuY2xhc3NOYW1lLnNlYXJjaCgvXFxic29ydGFibGVcXGIvKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgc29ydHRhYmxlLm1ha2VTb3J0YWJsZSh0YWJsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG1ha2VTb3J0YWJsZTogZnVuY3Rpb24odGFibGUpIHtcclxuICAgICAgICBpZiAodGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RoZWFkJykubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgLy8gdGFibGUgZG9lc24ndCBoYXZlIGEgdEhlYWQuIFNpbmNlIGl0IHNob3VsZCBoYXZlLCBjcmVhdGUgb25lIGFuZFxyXG4gICAgICAgICAgICAvLyBwdXQgdGhlIGZpcnN0IHRhYmxlIHJvdyBpbiBpdC5cclxuICAgICAgICAgICAgdGhlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcclxuICAgICAgICAgICAgdGhlLmFwcGVuZENoaWxkKHRhYmxlLnJvd3NbMF0pO1xyXG4gICAgICAgICAgICB0YWJsZS5pbnNlcnRCZWZvcmUodGhlLCB0YWJsZS5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCB0YWJsZS50SGVhZCwgc2lnaFxyXG4gICAgICAgIGlmICh0YWJsZS50SGVhZCA9PSBudWxsKSB0YWJsZS50SGVhZCA9IHRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0aGVhZCcpWzBdO1xyXG5cclxuICAgICAgICBpZiAodGFibGUudEhlYWQucm93cy5sZW5ndGggIT0gMSkgcmV0dXJuOyAvLyBjYW4ndCBjb3BlIHdpdGggdHdvIGhlYWRlciByb3dzXHJcblxyXG4gICAgICAgIC8vIFNvcnR0YWJsZSB2MSBwdXQgcm93cyB3aXRoIGEgY2xhc3Mgb2YgXCJzb3J0Ym90dG9tXCIgYXQgdGhlIGJvdHRvbSAoYXNcclxuICAgICAgICAvLyBcInRvdGFsXCIgcm93cywgZm9yIGV4YW1wbGUpLiBUaGlzIGlzIEImUiwgc2luY2Ugd2hhdCB5b3UncmUgc3VwcG9zZWRcclxuICAgICAgICAvLyB0byBkbyBpcyBwdXQgdGhlbSBpbiBhIHRmb290LiBTbywgaWYgdGhlcmUgYXJlIHNvcnRib3R0b20gcm93cyxcclxuICAgICAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIG1vdmUgdGhlbSB0byB0Zm9vdCAoY3JlYXRpbmcgaXQgaWYgbmVlZGVkKS5cclxuICAgICAgICBzb3J0Ym90dG9tcm93cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFibGUucm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGFibGUucm93c1tpXS5jbGFzc05hbWUuc2VhcmNoKC9cXGJzb3J0Ym90dG9tXFxiLykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHNvcnRib3R0b21yb3dzW3NvcnRib3R0b21yb3dzLmxlbmd0aF0gPSB0YWJsZS5yb3dzW2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzb3J0Ym90dG9tcm93cykge1xyXG4gICAgICAgICAgICBpZiAodGFibGUudEZvb3QgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGFibGUgZG9lc24ndCBoYXZlIGEgdGZvb3QuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgICAgICB0Zm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Zm9vdCcpO1xyXG4gICAgICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvcnRib3R0b21yb3dzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0Zm8uYXBwZW5kQ2hpbGQoc29ydGJvdHRvbXJvd3NbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzb3J0Ym90dG9tcm93cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHdvcmsgdGhyb3VnaCBlYWNoIGNvbHVtbiBhbmQgY2FsY3VsYXRlIGl0cyB0eXBlXHJcbiAgICAgICAgaGVhZHJvdyA9IHRhYmxlLnRIZWFkLnJvd3NbMF0uY2VsbHM7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkcm93Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIG1hbnVhbGx5IG92ZXJyaWRlIHRoZSB0eXBlIHdpdGggYSBzb3J0dGFibGVfdHlwZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgaWYgKCFoZWFkcm93W2ldLmNsYXNzTmFtZS5tYXRjaCgvXFxic29ydHRhYmxlX25vc29ydFxcYi8pKSB7IC8vIHNraXAgdGhpcyBjb2xcclxuICAgICAgICAgICAgICAgIG10Y2ggPSBoZWFkcm93W2ldLmNsYXNzTmFtZS5tYXRjaCgvXFxic29ydHRhYmxlXyhbYS16MC05XSspXFxiLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlID0gbXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtdGNoICYmIHR5cGVvZiBzb3J0dGFibGVbXCJzb3J0X1wiICsgb3ZlcnJpZGVdID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkcm93W2ldLnNvcnR0YWJsZV9zb3J0ZnVuY3Rpb24gPSBzb3J0dGFibGVbXCJzb3J0X1wiICsgb3ZlcnJpZGVdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkcm93W2ldLnNvcnR0YWJsZV9zb3J0ZnVuY3Rpb24gPSBzb3J0dGFibGUuZ3Vlc3NUeXBlKHRhYmxlLCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG1ha2UgaXQgY2xpY2thYmxlIHRvIHNvcnRcclxuICAgICAgICAgICAgICAgIGhlYWRyb3dbaV0uc29ydHRhYmxlX2NvbHVtbmluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIGhlYWRyb3dbaV0uc29ydHRhYmxlX3Rib2R5ID0gdGFibGUudEJvZGllc1swXTtcclxuICAgICAgICAgICAgICAgIGRlYW5fYWRkRXZlbnQoaGVhZHJvd1tpXSwgXCJjbGlja1wiLCBzb3J0dGFibGUuaW5uZXJTb3J0RnVuY3Rpb24gPSBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZS5zZWFyY2goL1xcYnNvcnR0YWJsZV9zb3J0ZWRcXGIvKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IHNvcnRlZCBieSB0aGlzIGNvbHVtbiwganVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXZlcnNlIHRoZSB0YWJsZSwgd2hpY2ggaXMgcXVpY2tlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0dGFibGUucmV2ZXJzZSh0aGlzLnNvcnR0YWJsZV90Ym9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWUucmVwbGFjZSgnc29ydHRhYmxlX3NvcnRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc29ydHRhYmxlX3NvcnRlZF9yZXZlcnNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvcnR0YWJsZV9zb3J0ZndkaW5kJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0cmV2aW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0cmV2aW5kLmlkID0gXCJzb3J0dGFibGVfc29ydHJldmluZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0cmV2aW5kLmlubmVySFRNTCA9IHN0SXNJRSA/ICcmbmJzcDxmb250IGZhY2U9XCJ3ZWJkaW5nc1wiPjU8L2ZvbnQ+JyA6ICcmbmJzcDsmI3gyNUJFOyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoc29ydHJldmluZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lLnNlYXJjaCgvXFxic29ydHRhYmxlX3NvcnRlZF9yZXZlcnNlXFxiLykgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UncmUgYWxyZWFkeSBzb3J0ZWQgYnkgdGhpcyBjb2x1bW4gaW4gcmV2ZXJzZSwganVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1yZXZlcnNlIHRoZSB0YWJsZSwgd2hpY2ggaXMgcXVpY2tlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0dGFibGUucmV2ZXJzZSh0aGlzLnNvcnR0YWJsZV90Ym9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWUucmVwbGFjZSgnc29ydHRhYmxlX3NvcnRlZF9yZXZlcnNlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0dGFibGVfc29ydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvcnR0YWJsZV9zb3J0cmV2aW5kJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZndkaW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZndkaW5kLmlkID0gXCJzb3J0dGFibGVfc29ydGZ3ZGluZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZndkaW5kLmlubmVySFRNTCA9IHN0SXNJRSA/ICcmbmJzcDxmb250IGZhY2U9XCJ3ZWJkaW5nc1wiPjY8L2ZvbnQ+JyA6ICcmbmJzcDsmI3gyNUI0Oyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoc29ydGZ3ZGluZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBzb3J0dGFibGVfc29ydGVkIGNsYXNzZXNcclxuICAgICAgICAgICAgICAgICAgICB0aGVhZHJvdyA9IHRoaXMucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoZWFkcm93LmNoaWxkTm9kZXMsIGZ1bmN0aW9uKGNlbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwubm9kZVR5cGUgPT0gMSkgeyAvLyBhbiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTmFtZSA9IGNlbGwuY2xhc3NOYW1lLnJlcGxhY2UoJ3NvcnR0YWJsZV9zb3J0ZWRfcmV2ZXJzZScsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NOYW1lID0gY2VsbC5jbGFzc05hbWUucmVwbGFjZSgnc29ydHRhYmxlX3NvcnRlZCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRmd2RpbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydHRhYmxlX3NvcnRmd2RpbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc29ydGZ3ZGluZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZndkaW5kLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc29ydGZ3ZGluZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRyZXZpbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29ydHRhYmxlX3NvcnRyZXZpbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc29ydHJldmluZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0cmV2aW5kLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc29ydHJldmluZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSArPSAnIHNvcnR0YWJsZV9zb3J0ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRmd2RpbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydGZ3ZGluZC5pZCA9IFwic29ydHRhYmxlX3NvcnRmd2RpbmRcIjtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0ZndkaW5kLmlubmVySFRNTCA9IHN0SXNJRSA/ICcmbmJzcDxmb250IGZhY2U9XCJ3ZWJkaW5nc1wiPjY8L2ZvbnQ+JyA6ICcmbmJzcDsmI3gyNUI0Oyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChzb3J0ZndkaW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYW4gYXJyYXkgdG8gc29ydC4gVGhpcyBpcyBhIFNjaHdhcnR6aWFuIHRyYW5zZm9ybSB0aGluZyxcclxuICAgICAgICAgICAgICAgICAgICAvLyBpLmUuLCB3ZSBcImRlY29yYXRlXCIgZWFjaCByb3cgd2l0aCB0aGUgYWN0dWFsIHNvcnQga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvcnQgYmFzZWQgb24gdGhlIHNvcnQga2V5cywgYW5kIHRoZW4gcHV0IHRoZSByb3dzIGJhY2sgaW4gb3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBpcyBhIGxvdCBmYXN0ZXIgYmVjYXVzZSB5b3Ugb25seSBkbyBnZXRJbm5lclRleHQgb25jZSBwZXIgcm93XHJcbiAgICAgICAgICAgICAgICAgICAgcm93X2FycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgY29sID0gdGhpcy5zb3J0dGFibGVfY29sdW1uaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuc29ydHRhYmxlX3Rib2R5LnJvd3M7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd19hcnJheVtyb3dfYXJyYXkubGVuZ3RoXSA9IFtzb3J0dGFibGUuZ2V0SW5uZXJUZXh0KHJvd3Nbal0uY2VsbHNbY29sXSksIHJvd3Nbal1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvKiBJZiB5b3Ugd2FudCBhIHN0YWJsZSBzb3J0LCB1bmNvbW1lbnQgdGhlIGZvbGxvd2luZyBsaW5lICovXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zb3J0dGFibGUuc2hha2VyX3NvcnQocm93X2FycmF5LCB0aGlzLnNvcnR0YWJsZV9zb3J0ZnVuY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIGFuZCBjb21tZW50IG91dCB0aGlzIG9uZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd19hcnJheS5zb3J0KHRoaXMuc29ydHRhYmxlX3NvcnRmdW5jdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRiID0gdGhpcy5zb3J0dGFibGVfdGJvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dfYXJyYXkubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGIuYXBwZW5kQ2hpbGQocm93X2FycmF5W2pdWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dfYXJyYXk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZ3Vlc3NUeXBlOiBmdW5jdGlvbih0YWJsZSwgY29sdW1uKSB7XHJcbiAgICAgICAgLy8gZ3Vlc3MgdGhlIHR5cGUgb2YgYSBjb2x1bW4gYmFzZWQgb24gaXRzIGZpcnN0IG5vbi1ibGFuayByb3dcclxuICAgICAgICBzb3J0Zm4gPSBzb3J0dGFibGUuc29ydF9hbHBoYTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYmxlLnRCb2RpZXNbMF0ucm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0ZXh0ID0gc29ydHRhYmxlLmdldElubmVyVGV4dCh0YWJsZS50Qm9kaWVzWzBdLnJvd3NbaV0uY2VsbHNbY29sdW1uXSk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0ICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dC5tYXRjaCgvXi0/W++/vSTvv71dP1tcXGQsLl0rJT8kLykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29ydHRhYmxlLnNvcnRfbnVtZXJpYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBhIGRhdGU6IGRkL21tL3l5eXkgb3IgZGQvbW0veXlcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBoYXZlIC8gb3IgLiBvciAtIGFzIHNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIG1tL2RkIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgIHBvc3NkYXRlID0gdGV4dC5tYXRjaChzb3J0dGFibGUuREFURV9SRSlcclxuICAgICAgICAgICAgICAgIGlmIChwb3NzZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvb2tzIGxpa2UgYSBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBwYXJzZUludChwb3NzZGF0ZVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kID0gcGFyc2VJbnQocG9zc2RhdGVbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdCA+IDEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluaXRlbHkgZGQvbW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcnR0YWJsZS5zb3J0X2RkbW07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWNvbmQgPiAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29ydHRhYmxlLnNvcnRfbW1kZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rcyBsaWtlIGEgZGF0ZSwgYnV0IHdlIGNhbid0IHRlbGwgd2hpY2gsIHNvIGFzc3VtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGl0J3MgZGQvbW0gKEVuZ2xpc2ggaW1wZXJpYWxpc20hKSBhbmQga2VlcCBsb29raW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRmbiA9IHNvcnR0YWJsZS5zb3J0X2RkbW07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzb3J0Zm47XHJcbiAgICB9LFxyXG5cclxuICAgIGdldElubmVyVGV4dDogZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgIC8vIGdldHMgdGhlIHRleHQgd2Ugd2FudCB0byB1c2UgZm9yIHNvcnRpbmcgZm9yIGEgY2VsbC5cclxuICAgICAgICAvLyBzdHJpcHMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS5cclxuICAgICAgICAvLyB0aGlzIGlzICpub3QqIGEgZ2VuZXJpYyBnZXRJbm5lclRleHQgZnVuY3Rpb247IGl0J3Mgc3BlY2lhbCB0byBzb3J0dGFibGUuXHJcbiAgICAgICAgLy8gZm9yIGV4YW1wbGUsIHlvdSBjYW4gb3ZlcnJpZGUgdGhlIGNlbGwgdGV4dCB3aXRoIGEgY3VzdG9ta2V5IGF0dHJpYnV0ZS5cclxuICAgICAgICAvLyBpdCBhbHNvIGdldHMgLnZhbHVlIGZvciA8aW5wdXQ+IGZpZWxkcy5cclxuXHJcbiAgICAgICAgaWYgKCFub2RlKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgICAgICAgaGFzSW5wdXRzID0gKHR5cGVvZiBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lID09ICdmdW5jdGlvbicpICYmXHJcbiAgICAgICAgICAgIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JykubGVuZ3RoO1xyXG5cclxuICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJzb3J0dGFibGVfY3VzdG9ta2V5XCIpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKFwic29ydHRhYmxlX2N1c3RvbWtleVwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlLnRleHRDb250ZW50ICE9ICd1bmRlZmluZWQnICYmICFoYXNJbnB1dHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUuaW5uZXJUZXh0ICE9ICd1bmRlZmluZWQnICYmICFoYXNJbnB1dHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGUuaW5uZXJUZXh0LnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub2RlLnRleHQgIT0gJ3VuZGVmaW5lZCcgJiYgIWhhc0lucHV0cykge1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZS50ZXh0LnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLm5vZGVWYWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lclRleHQgKz0gc29ydHRhYmxlLmdldElubmVyVGV4dChub2RlLmNoaWxkTm9kZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbm5lclRleHQucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKHRib2R5KSB7XHJcbiAgICAgICAgLy8gcmV2ZXJzZSB0aGUgcm93cyBpbiBhIHRib2R5XHJcbiAgICAgICAgbmV3cm93cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGJvZHkucm93cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXdyb3dzW25ld3Jvd3MubGVuZ3RoXSA9IHRib2R5LnJvd3NbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSBuZXdyb3dzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKG5ld3Jvd3NbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgbmV3cm93cztcclxuICAgIH0sXHJcblxyXG4gICAgLyogc29ydCBmdW5jdGlvbnNcclxuICAgICAgIGVhY2ggc29ydCBmdW5jdGlvbiB0YWtlcyB0d28gcGFyYW1ldGVycywgYSBhbmQgYlxyXG4gICAgICAgeW91IGFyZSBjb21wYXJpbmcgYVswXSBhbmQgYlswXSAqL1xyXG4gICAgc29ydF9udW1lcmljOiBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgYWEgPSBwYXJzZUZsb2F0KGFbMF0ucmVwbGFjZSgvW14wLTkuLV0vZywgJycpKTtcclxuICAgICAgICBpZiAoaXNOYU4oYWEpKSBhYSA9IDA7XHJcbiAgICAgICAgYmIgPSBwYXJzZUZsb2F0KGJbMF0ucmVwbGFjZSgvW14wLTkuLV0vZywgJycpKTtcclxuICAgICAgICBpZiAoaXNOYU4oYmIpKSBiYiA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGFhIC0gYmI7XHJcbiAgICB9LFxyXG4gICAgc29ydF9hbHBoYTogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIGlmIChhWzBdID09IGJbMF0pIHJldHVybiAwO1xyXG4gICAgICAgIGlmIChhWzBdIDwgYlswXSkgcmV0dXJuIC0xO1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfSxcclxuICAgIHNvcnRfZGRtbTogZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIG10Y2ggPSBhWzBdLm1hdGNoKHNvcnR0YWJsZS5EQVRFX1JFKTtcclxuICAgICAgICB5ID0gbXRjaFszXTtcclxuICAgICAgICBtID0gbXRjaFsyXTtcclxuICAgICAgICBkID0gbXRjaFsxXTtcclxuICAgICAgICBpZiAobS5sZW5ndGggPT0gMSkgbSA9ICcwJyArIG07XHJcbiAgICAgICAgaWYgKGQubGVuZ3RoID09IDEpIGQgPSAnMCcgKyBkO1xyXG4gICAgICAgIGR0MSA9IHkgKyBtICsgZDtcclxuICAgICAgICBtdGNoID0gYlswXS5tYXRjaChzb3J0dGFibGUuREFURV9SRSk7XHJcbiAgICAgICAgeSA9IG10Y2hbM107XHJcbiAgICAgICAgbSA9IG10Y2hbMl07XHJcbiAgICAgICAgZCA9IG10Y2hbMV07XHJcbiAgICAgICAgaWYgKG0ubGVuZ3RoID09IDEpIG0gPSAnMCcgKyBtO1xyXG4gICAgICAgIGlmIChkLmxlbmd0aCA9PSAxKSBkID0gJzAnICsgZDtcclxuICAgICAgICBkdDIgPSB5ICsgbSArIGQ7XHJcbiAgICAgICAgaWYgKGR0MSA9PSBkdDIpIHJldHVybiAwO1xyXG4gICAgICAgIGlmIChkdDEgPCBkdDIpIHJldHVybiAtMTtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0sXHJcbiAgICBzb3J0X21tZGQ6IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICBtdGNoID0gYVswXS5tYXRjaChzb3J0dGFibGUuREFURV9SRSk7XHJcbiAgICAgICAgeSA9IG10Y2hbM107XHJcbiAgICAgICAgZCA9IG10Y2hbMl07XHJcbiAgICAgICAgbSA9IG10Y2hbMV07XHJcbiAgICAgICAgaWYgKG0ubGVuZ3RoID09IDEpIG0gPSAnMCcgKyBtO1xyXG4gICAgICAgIGlmIChkLmxlbmd0aCA9PSAxKSBkID0gJzAnICsgZDtcclxuICAgICAgICBkdDEgPSB5ICsgbSArIGQ7XHJcbiAgICAgICAgbXRjaCA9IGJbMF0ubWF0Y2goc29ydHRhYmxlLkRBVEVfUkUpO1xyXG4gICAgICAgIHkgPSBtdGNoWzNdO1xyXG4gICAgICAgIGQgPSBtdGNoWzJdO1xyXG4gICAgICAgIG0gPSBtdGNoWzFdO1xyXG4gICAgICAgIGlmIChtLmxlbmd0aCA9PSAxKSBtID0gJzAnICsgbTtcclxuICAgICAgICBpZiAoZC5sZW5ndGggPT0gMSkgZCA9ICcwJyArIGQ7XHJcbiAgICAgICAgZHQyID0geSArIG0gKyBkO1xyXG4gICAgICAgIGlmIChkdDEgPT0gZHQyKSByZXR1cm4gMDtcclxuICAgICAgICBpZiAoZHQxIDwgZHQyKSByZXR1cm4gLTE7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9LFxyXG5cclxuICAgIHNoYWtlcl9zb3J0OiBmdW5jdGlvbihsaXN0LCBjb21wX2Z1bmMpIHtcclxuICAgICAgICAvLyBBIHN0YWJsZSBzb3J0IGZ1bmN0aW9uIHRvIGFsbG93IG11bHRpLWxldmVsIHNvcnRpbmcgb2YgZGF0YVxyXG4gICAgICAgIC8vIHNlZTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db2NrdGFpbF9zb3J0XHJcbiAgICAgICAgLy8gdGhhbmtzIHRvIEpvc2VwaCBOYWhtaWFzXHJcbiAgICAgICAgdmFyIGIgPSAwO1xyXG4gICAgICAgIHZhciB0ID0gbGlzdC5sZW5ndGggLSAxO1xyXG4gICAgICAgIHZhciBzd2FwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHN3YXApIHtcclxuICAgICAgICAgICAgc3dhcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYjsgaSA8IHQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBfZnVuYyhsaXN0W2ldLCBsaXN0W2kgKyAxXSkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBsaXN0W2kgKyAxXTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2kgKyAxXSA9IHE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dhcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gLy8gZm9yXHJcbiAgICAgICAgICAgIHQtLTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc3dhcCkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdDsgaSA+IGI7IC0taSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBfZnVuYyhsaXN0W2ldLCBsaXN0W2kgLSAxXSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBsaXN0W2kgLSAxXTtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2kgLSAxXSA9IHE7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dhcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gLy8gZm9yXHJcbiAgICAgICAgICAgIGIrKztcclxuXHJcbiAgICAgICAgfSAvLyB3aGlsZShzd2FwKVxyXG4gICAgfVxyXG59XHJcblxyXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICAgU3VwcG9ydGluZyBmdW5jdGlvbnM6IGJ1bmRsZWQgaGVyZSB0byBhdm9pZCBkZXBlbmRpbmcgb24gYSBsaWJyYXJ5XHJcbiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuLy8gRGVhbiBFZHdhcmRzL01hdHRoaWFzIE1pbGxlci9Kb2huIFJlc2lnXHJcblxyXG4vKiBmb3IgTW96aWxsYS9PcGVyYTkgKi9cclxuaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIHNvcnR0YWJsZS5pbml0LCBmYWxzZSk7XHJcbn1cclxuXHJcbi8qIGZvciBJbnRlcm5ldCBFeHBsb3JlciAqL1xyXG4vKkBjY19vbiBAKi9cclxuLypAaWYgKEBfd2luMzIpXHJcbiAgICBkb2N1bWVudC53cml0ZShcIjxzY3JpcHQgaWQ9X19pZV9vbmxvYWQgZGVmZXIgc3JjPWphdmFzY3JpcHQ6dm9pZCgwKT48XFwvc2NyaXB0PlwiKTtcclxuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIl9faWVfb25sb2FkXCIpO1xyXG4gICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgIHNvcnR0YWJsZS5pbml0KCk7IC8vIGNhbGwgdGhlIG9ubG9hZCBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuLypAZW5kIEAqL1xyXG5cclxuLyogZm9yIFNhZmFyaSAqL1xyXG5pZiAoL1dlYktpdC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsgLy8gc25pZmZcclxuICAgIHZhciBfdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoL2xvYWRlZHxjb21wbGV0ZS8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKSkge1xyXG4gICAgICAgICAgICBzb3J0dGFibGUuaW5pdCgpOyAvLyBjYWxsIHRoZSBvbmxvYWQgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgIH0sIDEwKTtcclxufVxyXG5cclxuLyogZm9yIG90aGVyIGJyb3dzZXJzICovXHJcbndpbmRvdy5vbmxvYWQgPSBzb3J0dGFibGUuaW5pdDtcclxuXHJcbi8vIHdyaXR0ZW4gYnkgRGVhbiBFZHdhcmRzLCAyMDA1XHJcbi8vIHdpdGggaW5wdXQgZnJvbSBUaW5vIFppamRlbCwgTWF0dGhpYXMgTWlsbGVyLCBEaWVnbyBQZXJpbmlcclxuXHJcbi8vIGh0dHA6Ly9kZWFuLmVkd2FyZHMubmFtZS93ZWJsb2cvMjAwNS8xMC9hZGQtZXZlbnQvXHJcblxyXG5mdW5jdGlvbiBkZWFuX2FkZEV2ZW50KGVsZW1lbnQsIHR5cGUsIGhhbmRsZXIpIHtcclxuICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBhc3NpZ24gZWFjaCBldmVudCBoYW5kbGVyIGEgdW5pcXVlIElEXHJcbiAgICAgICAgaWYgKCFoYW5kbGVyLiQkZ3VpZCkgaGFuZGxlci4kJGd1aWQgPSBkZWFuX2FkZEV2ZW50Lmd1aWQrKztcclxuICAgICAgICAvLyBjcmVhdGUgYSBoYXNoIHRhYmxlIG9mIGV2ZW50IHR5cGVzIGZvciB0aGUgZWxlbWVudFxyXG4gICAgICAgIGlmICghZWxlbWVudC5ldmVudHMpIGVsZW1lbnQuZXZlbnRzID0ge307XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgaGFzaCB0YWJsZSBvZiBldmVudCBoYW5kbGVycyBmb3IgZWFjaCBlbGVtZW50L2V2ZW50IHBhaXJcclxuICAgICAgICB2YXIgaGFuZGxlcnMgPSBlbGVtZW50LmV2ZW50c1t0eXBlXTtcclxuICAgICAgICBpZiAoIWhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXJzID0gZWxlbWVudC5ldmVudHNbdHlwZV0gPSB7fTtcclxuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIGV4aXN0aW5nIGV2ZW50IGhhbmRsZXIgKGlmIHRoZXJlIGlzIG9uZSlcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRbXCJvblwiICsgdHlwZV0pIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzWzBdID0gZWxlbWVudFtcIm9uXCIgKyB0eXBlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzdG9yZSB0aGUgZXZlbnQgaGFuZGxlciBpbiB0aGUgaGFzaCB0YWJsZVxyXG4gICAgICAgIGhhbmRsZXJzW2hhbmRsZXIuJCRndWlkXSA9IGhhbmRsZXI7XHJcbiAgICAgICAgLy8gYXNzaWduIGEgZ2xvYmFsIGV2ZW50IGhhbmRsZXIgdG8gZG8gYWxsIHRoZSB3b3JrXHJcbiAgICAgICAgZWxlbWVudFtcIm9uXCIgKyB0eXBlXSA9IGhhbmRsZUV2ZW50O1xyXG4gICAgfVxyXG59O1xyXG4vLyBhIGNvdW50ZXIgdXNlZCB0byBjcmVhdGUgdW5pcXVlIElEc1xyXG5kZWFuX2FkZEV2ZW50Lmd1aWQgPSAxO1xyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZWxlbWVudCwgdHlwZSwgaGFuZGxlcikge1xyXG4gICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGRlbGV0ZSB0aGUgZXZlbnQgaGFuZGxlciBmcm9tIHRoZSBoYXNoIHRhYmxlXHJcbiAgICAgICAgaWYgKGVsZW1lbnQuZXZlbnRzICYmIGVsZW1lbnQuZXZlbnRzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBlbGVtZW50LmV2ZW50c1t0eXBlXVtoYW5kbGVyLiQkZ3VpZF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRXZlbnQoZXZlbnQpIHtcclxuICAgIHZhciByZXR1cm5WYWx1ZSA9IHRydWU7XHJcbiAgICAvLyBncmFiIHRoZSBldmVudCBvYmplY3QgKElFIHVzZXMgYSBnbG9iYWwgZXZlbnQgb2JqZWN0KVxyXG4gICAgZXZlbnQgPSBldmVudCB8fCBmaXhFdmVudCgoKHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLmRvY3VtZW50IHx8IHRoaXMpLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cpLmV2ZW50KTtcclxuICAgIC8vIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgaGFzaCB0YWJsZSBvZiBldmVudCBoYW5kbGVyc1xyXG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy5ldmVudHNbZXZlbnQudHlwZV07XHJcbiAgICAvLyBleGVjdXRlIGVhY2ggZXZlbnQgaGFuZGxlclxyXG4gICAgZm9yICh2YXIgaSBpbiBoYW5kbGVycykge1xyXG4gICAgICAgIHRoaXMuJCRoYW5kbGVFdmVudCA9IGhhbmRsZXJzW2ldO1xyXG4gICAgICAgIGlmICh0aGlzLiQkaGFuZGxlRXZlbnQoZXZlbnQpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGZpeEV2ZW50KGV2ZW50KSB7XHJcbiAgICAvLyBhZGQgVzNDIHN0YW5kYXJkIGV2ZW50IG1ldGhvZHNcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID0gZml4RXZlbnQucHJldmVudERlZmF1bHQ7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPSBmaXhFdmVudC5zdG9wUHJvcGFnYXRpb247XHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbn07XHJcbmZpeEV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbn07XHJcbmZpeEV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG59XHJcblxyXG4vLyBEZWFuJ3MgZm9yRWFjaDogaHR0cDovL2RlYW4uZWR3YXJkcy5uYW1lL2Jhc2UvZm9yRWFjaC5qc1xyXG4vKlxyXG5cdGZvckVhY2gsIHZlcnNpb24gMS4wXHJcblx0Q29weXJpZ2h0IDIwMDYsIERlYW4gRWR3YXJkc1xyXG5cdExpY2Vuc2U6IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiovXHJcblxyXG4vLyBhcnJheS1saWtlIGVudW1lcmF0aW9uXHJcbmlmICghQXJyYXkuZm9yRWFjaCkgeyAvLyBtb3ppbGxhIGFscmVhZHkgc3VwcG9ydHMgdGhpc1xyXG4gICAgQXJyYXkuZm9yRWFjaCA9IGZ1bmN0aW9uKGFycmF5LCBibG9jaywgY29udGV4dCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYmxvY2suY2FsbChjb250ZXh0LCBhcnJheVtpXSwgaSwgYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8vIGdlbmVyaWMgZW51bWVyYXRpb25cclxuRnVuY3Rpb24ucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihvYmplY3QsIGJsb2NrLCBjb250ZXh0KSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3RvdHlwZVtrZXldID09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgYmxvY2suY2FsbChjb250ZXh0LCBvYmplY3Rba2V5XSwga2V5LCBvYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vIGNoYXJhY3RlciBlbnVtZXJhdGlvblxyXG5TdHJpbmcuZm9yRWFjaCA9IGZ1bmN0aW9uKHN0cmluZywgYmxvY2ssIGNvbnRleHQpIHtcclxuICAgIEFycmF5LmZvckVhY2goc3RyaW5nLnNwbGl0KFwiXCIpLCBmdW5jdGlvbihjaHIsIGluZGV4KSB7XHJcbiAgICAgICAgYmxvY2suY2FsbChjb250ZXh0LCBjaHIsIGluZGV4LCBzdHJpbmcpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyBnbG9iYWxseSByZXNvbHZlIGZvckVhY2ggZW51bWVyYXRpb25cclxudmFyIGZvckVhY2ggPSBmdW5jdGlvbihvYmplY3QsIGJsb2NrLCBjb250ZXh0KSB7XHJcbiAgICBpZiAob2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIHJlc29sdmUgPSBPYmplY3Q7IC8vIGRlZmF1bHRcclxuICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25zIGhhdmUgYSBcImxlbmd0aFwiIHByb3BlcnR5XHJcbiAgICAgICAgICAgIHJlc29sdmUgPSBGdW5jdGlvbjtcclxuICAgICAgICB9IGVsc2UgaWYgKG9iamVjdC5mb3JFYWNoIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gdGhlIG9iamVjdCBpbXBsZW1lbnRzIGEgY3VzdG9tIGZvckVhY2ggbWV0aG9kIHNvIHVzZSB0aGF0XHJcbiAgICAgICAgICAgIG9iamVjdC5mb3JFYWNoKGJsb2NrLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSBvYmplY3QgaXMgYSBzdHJpbmdcclxuICAgICAgICAgICAgcmVzb2x2ZSA9IFN0cmluZztcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmplY3QubGVuZ3RoID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgLy8gdGhlIG9iamVjdCBpcyBhcnJheS1saWtlXHJcbiAgICAgICAgICAgIHJlc29sdmUgPSBBcnJheTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb2x2ZS5mb3JFYWNoKG9iamVjdCwgYmxvY2ssIGNvbnRleHQpO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzb3J0dGFibGUiXSwic291cmNlUm9vdCI6IiJ9